---
title: "アプリ間の連携ってどうやってるんだ？Oauth2.0の仕組みを超ざっくり理解する"
emoji: "🔐"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: 
  - "Oauth2"
  - "認証"
  - "セキュリティ"
published: false
---

# はじめに
認証基盤の開発に関わる機会があったので、Oauth2.0の仕組みを理解するために調べたことをまとめました。
私はセキュリティについての知識がかなり浅いので、誤った情報が含まれているかもしれません。もし間違いがあれば教えていただけると幸いです！！！

# アプリ間の連携
みなさん、こんな画面見たことないですか？？
![](https://storage.googleapis.com/zenn-user-upload/128dd484e5a6-20240921.png)
これはconnpassの画面ですが、「GitHubと連携」をクリックすると、GitHubの認証画面に飛びます。
![](https://storage.googleapis.com/zenn-user-upload/e84d7ab7780c-20240921.png)
この画像では、connpass側がGitHubのuserのメールアドレス情報をreadする権限を求めていることがわかります。
このように、アプリケーション間でユーザー情報を共有するための仕組みに使われているのが**Oauth2.0**です。

# Oauth2.0とは
Oauth2.0は、異なるアプリケーション間でユーザー情報を共有するための**認可**フレームワークです。
ユーザーが自分のパスワードなどの認証情報を第三者アプリケーションと共有することなく、自分のデータや機能へのアクセスを許可できます。

## 認証と認可
まず、**認証(Authentication)** と **認可(Authorization)** の違いを押さえておきます。

- **認証**: ユーザーが誰であるかを確認するプロセス。例として、ユーザー名とパスワードを入力してログインするなどがあります。
- **認可**: 認証されたユーザーがどのリソースや機能にアクセスできるかを決定するプロセス。

OAuth2.0は主に**認可**を扱うプロトコルであり、ユーザーの**認証**自体は他の方法で行われます。（例：OAuth2.0の拡張であるOpenID Connectでは認証も行える）
:::message
OpenID Connectの説明はここではしません。余裕があれば別途記事で書く予定です！
:::

# Oauth2.0の登場人物
connpassとGitHubの例で登場人物を4人紹介します。

1. **リソースオーナー(Resource Owner)**
   - **例**：ユーザー(あなた)
   - **役割**：リソース(例：GitHubのプロフィール情報やメールアドレス)へのアクセス権を持つ主体
2. **クライアント(Client)**
    - **例**：connpass
    - **役割**：リソースオーナーのリソースにアクセスするアプリケーション
3. **リソースサーバー(Resource Server)**
    - **例**：GitHubのAPIサーバー
    - **役割**：リソースオーナーのデータを保管し、適切な認可が与えられたクライアントにそのデータを提供するサーバー
4. **認可サーバー(Authorization Server)**
    - **例**：GitHubの認証・認可を管理するサーバー
    - **役割**：リソースオーナーを認証し、クライアントにアクセストークンを発行するサーバー

# Oauth2.0の流れ
Oauth2.0の流れはざっくり以下のようになります。

# まとめ
